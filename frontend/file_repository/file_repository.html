<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件仓库 - 文件管理系统</title>
    <!-- 引入公用样式 -->
    <link rel="stylesheet" href="../common/common.css">
    <!-- 引入页面私有样式 -->
    <link rel="stylesheet" href="file_repository.css">
</head>
<body class="repo-body">
    <!-- 顶部工具栏：包含搜索、状态切换及返回 -->
    <header class="top-bar">
        <div class="top-bar-left">
            <button id="nav-back-btn" class="back-btn" title="返回上一页">
                <span>&lt; 返回</span>
            </button>
        </div>
        
        <div class="top-bar-center">
            <div class="search-container">
                <input type="text" id="search-input" placeholder="搜索文件名 (正则模糊匹配)..." autocomplete="off">
                <button id="search-btn" title="点击搜索">
                    <i class="search-icon"></i>
                </button>
            </div>
            <div class="search-section">
                <label class="checkbox-label">
                    <input type="checkbox" id="search-history-checkbox"> 搜索历史库
                </label>
            </div>
        </div>
        
        <div class="top-bar-right">
            <button id="btn-scan" class="right-btn">建立索引</button>
        </div>
    </header>

    <main class="repo-container">
        <!-- 主内容区域：在扫描时会整体隐藏 -->
        <div id="repo-main-content" class="repo-content-group">
            <!-- 数据展示区：自适应表格 -->
            <div class="table-wrapper">
                <table id="file-table">
                    <thead>
                        <tr>
                            <th class="sortable" data-field="file_name" style="width: 25%;">
                                文件名 <span class="sort-icon"></span>
                            </th>
                            <th class="sortable" data-field="file_path" style="width: 40%;">
                                完整路径 <span class="sort-icon"></span>
                            </th>
                            <th class="sortable" data-field="file_md5" style="width: 20%;">
                                MD5 哈希值 <span class="sort-icon"></span>
                            </th>
                            <th class="sortable" data-field="scan_time" style="width: 15%;">
                                扫描时间 <span class="sort-icon"></span>
                            </th>
                            <th style="width: 30px; text-align: center;">
                                <input type="checkbox" id="select-all-checkbox">
                            </th>
                        </tr>
                    </thead>
                    <tbody id="file-list-body">
                        <!-- 数据行由 JS 动态生成 -->
                    </tbody>
                </table>
            </div>

            <!-- 底部导航区：分页控制 -->
            <footer class="footer-bar">
                <div class="footer-left">
                    <div class="thumbnail-action-container">
                        <button id="btn-thumbnail" class="btn-secondary-small">生成缩略图</button>
                        <span id="thumbnail-progress-text" class="progress-text" style="display: none;"></span>
                    </div>
                </div>
                <div class="footer-center">
                    <div class="pagination-container">
                        <button id="btn-prev-page" class="btn-secondary-small" disabled>上一页</button>
                        <span id="page-info">第 1 / 1 页 (共 0 条)</span>
                        <button id="btn-next-page" class="btn-secondary-small" disabled>下一页</button>
                    </div>
                </div>
                <div class="footer-right">
                    <button id="btn-delete-selected" class="btn-danger-large" style="display: none;">删除选中</button>
                </div>
            </footer>
        </div>
    </main>

    <!-- 脚本加载 -->
    <script src="../common/ui_components.js"></script>
    <script src="../common/request.js"></script>
    <script src="../common/toast.js"></script>
    <script src="file_repository.js"></script>
</body>
</html>
